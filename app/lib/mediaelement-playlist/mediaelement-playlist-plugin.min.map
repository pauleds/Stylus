{"version":3,"file":"mediaelement-playlist-plugin.min.js","sources":["../js/mediaelement-playlist-plugin.js"],"names":["$","extend","mejs","MepDefaults","loopText","shuffleText","nextText","prevText","playlistText","MediaElementPlayer","prototype","buildloop","player","controls","layers","media","t","this","loop","options","id","appendTo","click","trigger","removeClass","addClass","loopToggle","find","loopToggleClick","buildshuffle","shuffle","shuffleToggle","shuffleToggleClick","buildprevtrack","prevTrack","playPrevTrack","prevTrackClick","buildnexttrack","nextTrack","playNextTrack","nextTrackClick","buildplaylist","playlistToggle","togglePlaylistDisplay","playlistToggleClick","buildplaylistfeature","playlist","data","hide","sourceIsPlayable","getTrackName","trackUrl","trackUrlParts","split","length","decodeURIComponent","tracks","foundMatchingType","each","parent","canPlayType","type","trim","src","track","source","name","title","poster","push","$thisLi","append","hasClass","css","background-image","videoSliderTracks","is","changePoster","$prevVid","$nextVid","videoSliderIndex","transform","moveMe","fadeOut","fadeIn","sliderWidth","width","Math","ceil","paused","play","pause","playTrack","addEventListener","container","show","nxt","current","filter","notplayed","not","siblings","random","floor","eq","next","first","prev","played","last","posterUrl","setPoster","setSrc","load","playTrackURL","url","showHide","children"],"mappings":"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","sourcesContent":["/* globals mejs, MediaElementPlayer */\n'use strict';\n\n/**\n * @file MediaElement Playlist Feature (plugin).\n * @author Rocco Georgi <rocco@pavingways.com>\n * Twitter handle: geeroc\n * @author Original author: Andrew Berezovsky <andrew.berezovsky@gmail.com>\n * Twitter handle: duozersk\n * @author Original author: Junaid Qadir Baloch <shekhanzai.baloch@gmail.com>\n * Twitter handle: jeykeu\n * Dual licensed under the MIT or GPL Version 2 licenses.\n */\n\n(function ($) {\n\t$.extend(mejs.MepDefaults, {\n\t\tloopText: 'Repeat On/Off',\n\t\tshuffleText: 'Shuffle On/Off',\n\t\tnextText: 'Next Track',\n\t\tprevText: 'Previous Track',\n\t\tplaylistText: 'Show/Hide Playlist'\n\t});\n\n\t$.extend(MediaElementPlayer.prototype, {\n\t\t// LOOP TOGGLE\n\t\tbuildloop: function (player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\tvar loop = $('<div class=\"mejs-button mejs-loop-button ' + ((player.options.loop) ? 'mejs-loop-on' : 'mejs-loop-off') + '\">' +\n\t\t\t\t'<button type=\"button\" aria-controls=\"' + player.id + '\" title=\"' + player.options.loopText + '\"></button>' +\n\t\t\t\t'</div>')\n\t\t\t\t// append it to the toolbar\n\t\t\t\t.appendTo(controls)\n\t\t\t\t// add a click toggle event\n\t\t\t\t.click(function () {\n\t\t\t\t\tplayer.options.loop = !player.options.loop;\n\t\t\t\t\t$(media).trigger('mep-looptoggle', [player.options.loop]);\n\t\t\t\t\tif (player.options.loop) {\n\t\t\t\t\t\tloop.removeClass('mejs-loop-off').addClass('mejs-loop-on');\n\t\t\t\t\t\t//media.setAttribute('loop', 'loop');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloop.removeClass('mejs-loop-on').addClass('mejs-loop-off');\n\t\t\t\t\t\t//media.removeAttribute('loop');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tt.loopToggle = t.controls.find('.mejs-loop-button');\n\t\t},\n\t\tloopToggleClick: function () {\n\t\t\tvar t = this;\n\t\t\tt.loopToggle.trigger('click');\n\t\t},\n\t\t// SHUFFLE TOGGLE\n\t\tbuildshuffle: function (player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\tvar shuffle = $('<div class=\"mejs-button mejs-shuffle-button ' + ((player.options.shuffle) ? 'mejs-shuffle-on' : 'mejs-shuffle-off') + '\">' +\n\t\t\t\t'<button type=\"button\" aria-controls=\"' + player.id + '\" title=\"' + player.options.shuffleText + '\"></button>' +\n\t\t\t\t'</div>')\n\t\t\t\t// append it to the toolbar\n\t\t\t\t.appendTo(controls)\n\t\t\t\t// add a click toggle event\n\t\t\t\t.click(function () {\n\t\t\t\t\tplayer.options.shuffle = !player.options.shuffle;\n\t\t\t\t\t$(media).trigger('mep-shuffletoggle', [player.options.shuffle]);\n\t\t\t\t\tif (player.options.shuffle) {\n\t\t\t\t\t\tshuffle.removeClass('mejs-shuffle-off').addClass('mejs-shuffle-on');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshuffle.removeClass('mejs-shuffle-on').addClass('mejs-shuffle-off');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tt.shuffleToggle = t.controls.find('.mejs-shuffle-button');\n\t\t},\n\t\tshuffleToggleClick: function () {\n\t\t\tvar t = this;\n\t\t\tt.shuffleToggle.trigger('click');\n\t\t},\n\t\t// PREVIOUS TRACK BUTTON\n\t\tbuildprevtrack: function (player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\tvar prevTrack = $('<div class=\"mejs-button mejs-prevtrack-button mejs-prevtrack\">' +\n\t\t\t\t'<button type=\"button\" aria-controls=\"' + player.id + '\" title=\"' + player.options.prevText + '\"></button>' +\n\t\t\t\t'</div>');\n\n\t\t\tprevTrack.appendTo(controls)\n\t\t\t\t.click(function () {\n\t\t\t\t\t$(media).trigger('mep-playprevtrack');\n\t\t\t\t\tplayer.playPrevTrack();\n\t\t\t\t});\n\n\t\t\tt.prevTrack = t.controls.find('.mejs-prevtrack-button');\n\t\t},\n\t\tprevTrackClick: function () {\n\t\t\tvar t = this;\n\t\t\tt.prevTrack.trigger('click');\n\t\t},\n\n\t\t// NEXT TRACK BUTTON\n\t\tbuildnexttrack: function (player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\tvar nextTrack = $('<div class=\"mejs-button mejs-nexttrack-button mejs-nexttrack\">' +\n\t\t\t\t'<button type=\"button\" aria-controls=\"' + player.id + '\" title=\"' + player.options.nextText + '\"></button>' +\n\t\t\t\t'</div>');\n\n\t\t\tnextTrack.appendTo(controls)\n\t\t\t\t.click(function () {\n\t\t\t\t\t$(media).trigger('mep-playnexttrack');\n\t\t\t\t\tplayer.playNextTrack();\n\t\t\t\t});\n\n\t\t\tt.nextTrack = t.controls.find('.mejs-nexttrack-button');\n\t\t},\n\t\tnextTrackClick: function () {\n\t\t\tvar t = this;\n\t\t\tt.nextTrack.trigger('click');\n\t\t},\n\n\t\t// PLAYLIST TOGGLE\n\t\tbuildplaylist: function (player, controls, layers, media) {\n\t\t\tvar t = this;\n\n\t\t\t// build playlist button\n\t\t\tvar playlistToggle = $('<div class=\"mejs-button mejs-playlist-button ' + ((player.options.playlist) ? 'mejs-hide-playlist' : 'mejs-show-playlist') + '\">' +\n\t\t\t\t'<button type=\"button\" aria-controls=\"' + player.id + '\" title=\"' + player.options.playlistText + '\"></button>' +\n\t\t\t\t'</div>');\n\n\t\t\tplaylistToggle.appendTo(controls)\n\t\t\t\t.click(function () {\n\t\t\t\t\t// toggle playlist display\n\t\t\t\t\tt.togglePlaylistDisplay(player, layers, media);\n\t\t\t\t});\n\n\t\t\tt.playlistToggle = t.controls.find('.mejs-playlist-button');\n\t\t},\n\t\tplaylistToggleClick: function () {\n\t\t\tvar t = this;\n\t\t\tt.playlistToggle.trigger('click');\n\t\t},\n\t\t// PLAYLIST WINDOW\n\t\tbuildplaylistfeature: function (player, controls, layers, media) {\n\n\t\t\t// add playlist view to layers\n\t\t\tvar t = this,\n\t\t\t\tplaylist = $('<div class=\"mejs-playlist mejs-layer\">' +\n\t\t\t\t'<ul class=\"mejs\"></ul>' +\n\t\t\t\t'</div>')\n\t\t\t\t.appendTo(layers);\n\n\t\t\t// activate playlist display when data-showplaylist is set\n\t\t\tif (!!$(media).data('showplaylist')) {\n\t\t\t\tplayer.options.playlist = true;\n\t\t\t\t// hide play overlay button\n\t\t\t\t$('#' + player.id).find('.mejs-overlay-play').hide();\n\t\t\t}\n\n\t\t\tif(!player.options.playlist) {\n\t\t\t\tplaylist.hide();\n\t\t\t}\n\n\t\t\tvar getTrackName = function (trackUrl) {\n\t\t\t\tvar trackUrlParts = trackUrl.split('/');\n\t\t\t\tif (trackUrlParts.length > 0) {\n\t\t\t\t\treturn decodeURIComponent(trackUrlParts[trackUrlParts.length - 1]);\n\t\t\t\t} else {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// calculate tracks and build playlist\n\t\t\tvar tracks = [],\n\t\t\t\tsourceIsPlayable,\n\t\t\t\tfoundMatchingType = '';\n\t\t\t//$(media).children('source').each(function (index, element) { // doesn't work in Opera 12.12\n\n\t\t\t$('#' + player.id).find('.mejs-mediaelement source').each(function () {\n\t\t\t\tsourceIsPlayable = $(this).parent()[0].canPlayType(this.type);\n\t\t\t\tif (!foundMatchingType && (sourceIsPlayable === 'maybe' || sourceIsPlayable === 'probably')) {\n\t\t\t\t\tfoundMatchingType = this.type;\n\t\t\t\t}\n\t\t\t\tif (!!foundMatchingType && this.type === foundMatchingType) {\n\t\t\t\t\tif ($.trim(this.src) !== '') {\n\t\t\t\t\t\tvar track = {};\n\t\t\t\t\t\ttrack.source = $.trim(this.src);\n\t\t\t\t\t\tif ($.trim(this.title) !== '') {\n\t\t\t\t\t\t\ttrack.name = $.trim(this.title);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttrack.name = getTrackName(track.source);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// add poster image URL from data-poster attribute\n\t\t\t\t\t\ttrack.poster = $(this).data('poster');\n\t\t\t\t\t\ttracks.push(track);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfor (var track in tracks) {\n\t\t\t\tvar $thisLi = $('<li data-url=\"' + tracks[track].source + '\" data-poster=\"' + tracks[track].poster + '\" title=\"' + tracks[track].name + '\"><span>' + tracks[track].name + '</span></li>');\n\t\t\t\tlayers.find('.mejs-playlist > ul').append($thisLi);\n\n\t\t\t\t/* slider */\n\t\t\t\tif ($(player.media).hasClass('mep-slider')) {\n\t\t\t\t\t$thisLi.css({\n\t\t\t\t\t\t'background-image': 'url(\"' + $thisLi.data('poster') + '\")'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* slider */\n\t\t\tplayer.videoSliderTracks = tracks.length;\n\n\t\t\t// set the first track as current\n\t\t\tlayers.find('li:first').addClass('current played');\n\t\t\t// set initial poster image - only for audio playlists\n\t\t\tif ($(player.media).is('audio')) {\n\t\t\t\tplayer.changePoster(layers.find('li:first').data('poster'));\n\t\t\t}\n\t\t\t/* slider */\n\t\t\tvar $prevVid = $('<a class=\"mep-prev\">'),\n\t\t\t\t$nextVid = $('<a class=\"mep-next\">');\n\n\t\t\tplayer.videoSliderIndex = 0;\n\n\t\t\tlayers.find('.mejs-playlist').append($prevVid);\n\t\t\tlayers.find('.mejs-playlist').append($nextVid);\n\n\t\t\t// transform individual track display\n\t\t\t$('#' + player.id + '.mejs-container.mep-slider').find('.mejs-playlist ul li').css({'transform': 'translate3d(0, -20px, 0) scale3d(0.75, 0.75, 1)'});\n\n\t\t\t$prevVid.click(function () {\n\t\t\t\tvar moveMe = true;\n\n\t\t\t\tplayer.videoSliderIndex -= 1;\n\t\t\t\tif (player.videoSliderIndex < 0) {\n\t\t\t\t\tplayer.videoSliderIndex = 0;\n\t\t\t\t\tmoveMe = false;\n\t\t\t\t}\n\n\t\t\t\tif (player.videoSliderIndex === player.videoSliderTracks - 1) {\n\t\t\t\t\t$nextVid.fadeOut();\n\t\t\t\t} else {\n\t\t\t\t\t$nextVid.fadeIn();\n\t\t\t\t}\n\t\t\t\tif (player.videoSliderIndex === 0) {\n\t\t\t\t\t$prevVid.fadeOut();\n\t\t\t\t} else {\n\t\t\t\t\t$prevVid.fadeIn();\n\t\t\t\t}\n\n\t\t\t\tif (moveMe === true) {\n\t\t\t\t\tplayer.sliderWidth = $('#' + player.id).width();\n\t\t\t\t\t//console.log('mep-prev clicked, moving to pos: ', Math.ceil(player.sliderWidth * player.videoSliderIndex));\n\t\t\t\t\t$('#' + player.id + '.mejs-container.mep-slider').find('.mejs-playlist ul li').css({'transform': 'translate3d(-' + Math.ceil(player.sliderWidth * player.videoSliderIndex) + 'px, -20px, 0) scale3d(0.75, 0.75, 1)'});\n\t\t\t\t}\n\t\t\t}).hide(); // initially hide prevVid button\n\n\t\t\t$nextVid.click(function () {\n\t\t\t\tvar moveMe = true;\n\n\t\t\t\tplayer.videoSliderIndex += 1;\n\t\t\t\tif (player.videoSliderIndex > player.videoSliderTracks - 1) {\n\t\t\t\t\tplayer.videoSliderIndex = player.videoSliderTracks - 1;\n\t\t\t\t\tmoveMe = false;\n\t\t\t\t}\n\n\t\t\t\tif (player.videoSliderIndex === player.videoSliderTracks - 1) {\n\t\t\t\t\t$nextVid.fadeOut();\n\t\t\t\t} else {\n\t\t\t\t\t$nextVid.fadeIn();\n\t\t\t\t}\n\t\t\t\tif (player.videoSliderIndex === 0) {\n\t\t\t\t\t$prevVid.fadeOut();\n\t\t\t\t} else {\n\t\t\t\t\t$prevVid.fadeIn();\n\t\t\t\t}\n\n\t\t\t\tif (moveMe === true) {\n\t\t\t\t\tplayer.sliderWidth = $('#' + player.id).width();\n\t\t\t\t\t//console.log('mep-next clicked, moving to pos: ', Math.ceil(player.sliderWidth * player.videoSliderIndex));\n\t\t\t\t\t$('#' + player.id + '.mejs-container.mep-slider').find('.mejs-playlist ul li').css({'transform': 'translate3d(-' + Math.ceil(player.sliderWidth * player.videoSliderIndex) + 'px, -20px, 0) scale3d(0.75, 0.75, 1)'});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// play track from playlist when clicking it\n\t\t\tlayers.find('.mejs-playlist > ul li').click(function () {\n\t\t\t\t// pause current track or play other one\n\t\t\t\tif (!$(this).hasClass('current')) {\n\t\t\t\t\t// clicked other track - play it\n\t\t\t\t\t$(this).addClass('played');\n\t\t\t\t\tplayer.playTrack($(this));\n\t\t\t\t} else {\n\t\t\t\t\t// clicked current track - play if paused and vice versa\n\t\t\t\t\tif (!player.media.paused) {\n\t\t\t\t\t\t// pause if playing\n\t\t\t\t\t\tplayer.pause();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// play if paused\n\t\t\t\t\t\tplayer.play();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// when current track ends - play the next one\n\t\t\tmedia.addEventListener('ended', function () {\n\t\t\t\tplayer.playNextTrack();\n\t\t\t}, false);\n\n\t\t\t// set play and paused class to container\n\t\t\tmedia.addEventListener('playing',function () {\n\t\t\t\tplayer.container.removeClass('mep-paused').addClass('mep-playing');\n\n\t\t\t\t// hide playlist for videos\n\t\t\t\tif ($(media).is('video')) {\n\t\t\t\t\tt.togglePlaylistDisplay(player, layers, media, 'hide');\n\t\t\t\t}\n\n\t\t\t}, false);\n\n\t\t\t/* mediaelement.js hides poster on \"play\" for all player types - not so great for audio */\n\t\t\tmedia.addEventListener('play', function () {\n\t\t\t\tif ($(player.media).is('audio')) {\n\t\t\t\t\tlayers.find('.mejs-poster').show();\n\t\t\t\t}\n\t\t\t}, false);\n\n\t\t\tmedia.addEventListener('pause',function () {\n\t\t\t\tplayer.container.removeClass('mep-playing').addClass('mep-paused');\n\t\t\t}, false);\n\n\t\t},\n\t\tplayNextTrack: function () {\n\t\t\tvar t = this, \n\t\t\t    nxt;\n\t\t\tvar tracks = t.layers.find('.mejs-playlist > ul > li');\n\t\t\tvar current = tracks.filter('.current');\n\t\t\tvar notplayed = tracks.not('.played');\n\t\t\tif (notplayed.length < 1) {\n\t\t\t\tcurrent.removeClass('played').siblings().removeClass('played');\n\t\t\t\tnotplayed = tracks.not('.current');\n\t\t\t}\n\t\t\tif (t.options.shuffle) {\n\t\t\t\tvar random = Math.floor(Math.random() * notplayed.length);\n\t\t\t\tnxt = notplayed.eq(random);\n\t\t\t} else {\n\t\t\t\tnxt = current.next();\n\t\t\t\tif (nxt.length < 1 && t.options.loop) {\n\t\t\t\t\tnxt = current.siblings().first();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nxt.length == 1) {\n\t\t\t\tnxt.addClass('played');\n\t\t\t\tt.playTrack(nxt);\n\t\t\t}\n\t\t},\n\t\tplayPrevTrack: function () {\n\t\t\tvar t = this,\n\t\t\t    prev;\n\t\t\tvar tracks = t.layers.find('.mejs-playlist > ul > li');\n\t\t\tvar current = tracks.filter('.current');\n\t\t\tvar played = tracks.filter('.played').not('.current');\n\t\t\tif (played.length < 1) {\n\t\t\t\tcurrent.removeClass('played');\n\t\t\t\tplayed = tracks.not('.current');\n\t\t\t}\n\t\t\tif (t.options.shuffle) {\n\t\t\t\tvar random = Math.floor(Math.random()*played.length);\n\t\t\t\tprev = played.eq(random);\n\t\t\t} else {\n\t\t\t\tprev = current.prev();\n\t\t\t\tif (prev.length < 1 && t.options.loop) {\n\t\t\t\t\tprev = current.siblings().last();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (prev.length == 1) {\n\t\t\t\tcurrent.removeClass('played');\n\t\t\t\tt.playTrack(prev);\n\t\t\t}\n\t\t},\n\t\tchangePoster: function (posterUrl) {\n\t\t\tvar t = this;\n\t\t\tt.layers.find('.mejs-playlist').css('background-image', 'url(\"' + posterUrl + '\")');\n\t\t\t// also set actual poster\n\t\t\tt.setPoster(posterUrl);\n\t\t\t// make sure poster is visible (not the case if no poster attribute was set)\n\t\t\tt.layers.find('.mejs-poster').show();\n\t\t},\n\t\tplayTrack: function (track) {\n\t\t\tvar t = this;\n\t\t\tt.pause();\n\t\t\tt.setSrc(track.data('url'));\n\t\t\tt.load();\n\t\t\tt.changePoster(track.data('poster'));\n\t\t\tt.play();\n\t\t\ttrack.addClass('current').siblings().removeClass('current');\n\t\t},\n\t\tplayTrackURL: function (url) {\n\t\t\tvar t = this;\n\t\t\tvar tracks = t.layers.find('.mejs-playlist > ul > li');\n\t\t\tvar track = tracks.filter('[data-url=\"' + url + '\"]');\n\t\t\tt.playTrack(track);\n\t\t},\n\t\ttogglePlaylistDisplay: function (player, layers, media, showHide) {\n\t\t\tvar t = this;\n\n\t\t\tif (!!showHide) {\n\t\t\t\tplayer.options.playlist = showHide === 'show' ? true : false;\n\t\t\t} else {\n\t\t\t\tplayer.options.playlist = !player.options.playlist;\n\t\t\t}\n\t\t\t\n\t\t\t$(media).trigger('mep-playlisttoggle', [player.options.playlist]);\n\n\t\t\t// toggle playlist display\n\t\t\tif (player.options.playlist) {\n\t\t\t\tlayers.children('.mejs-playlist').fadeIn();\n\t\t\t\tt.playlistToggle.removeClass('mejs-show-playlist').addClass('mejs-hide-playlist');\n\t\t\t} else {\n\t\t\t\tlayers.children('.mejs-playlist').fadeOut();\n\t\t\t\tt.playlistToggle.removeClass('mejs-hide-playlist').addClass('mejs-show-playlist');\n\t\t\t}\n\t\t}\n\t});\n\n})(mejs.$);\n"]}